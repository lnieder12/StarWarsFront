<div *ngIf="game">
    <h2>Game #{{ game.id }}</h2>
    <div>
        <ng-container *ngIf="winner">
            <h3>{{winner}}</h3>
        </ng-container>
        <p>
            <span>This game has </span>
            <a routerLink="/game/{{game.id}}/soldiers">{{ nbRebels }} Rebels and {{ nbEmpires }} Empires.</a>
        </p>
        <p>
            <span>Fighting for </span>
            <a routerLink="/game/{{game.id}}/rounds">{{ nbRounds }} rounds.</a>
        </p>
    </div>
    <p>
    <button (click)="goToScore()">View score</button>
    </p>

    <div *ngIf="round && show; else wait">
        <h3>Round #{{nbRounds}}</h3>

        <p>
            {{round.attacker.name}} attacks {{round.defender.name}} for {{round.damage}} damage.
        </p>
        <p>
            <ng-container *ngIf="!round.isDead">
                {{round.defender.name}} has {{round.defender.health}} hp left.
            </ng-container>

            <ng-container *ngIf="round.isDead">
                {{round.defender.name}} died.
            </ng-container>
        </p>


    </div>
    <ng-template #wait>
        <ng-container *ngIf="show;else wait2">
            Click for next fight.
        </ng-container>
    </ng-template>

    <ng-template #wait2>
        <ng-container *ngIf="moreFights; else wait3">Please wait...</ng-container>
    </ng-template>
    <ng-template #wait3>Fights are done.</ng-template>
    <div>
        <p>
            <button [disabled]="!show" (click)="nextFight()">Next</button>
        </p>
        <p>
            <ng-container *ngIf="nbFights > 0; else doAll">Fights for {{nbFights}} rounds</ng-container>
            <ng-template #doAll>
                <ng-container *ngIf="show">Do all remaining fights</ng-container>
            </ng-template>
            <br>
            <input [disabled]="!show" type="number" [(ngModel)]="nbFights" name="nbFights" />
            <button [disabled]="!show" (click)="skip()">Skip</button>
        </p>
    </div>

</div>

<ng-container *ngIf="!game">
    Couldn't find this game.
</ng-container>